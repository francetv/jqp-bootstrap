!function(a,b,c,d){function e(){return{loadScript:function(a,c){function d(a){g||(g=!0,f.parentNode.removeChild(f),c(a))}function e(){d(new Error("script load error"))}var f=b.createElement("script"),g=!1;f.addEventListener?(f.addEventListener("load",d.bind(null,null),!0),f.addEventListener("error",e,!0)):(f.onload=f.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||d()},f.onerror=e),f.async=!0,f.src=a;var h=b.getElementsByTagName("script")[0];h.parentNode.insertBefore(f,h)},get:function(b,d){"string"==typeof b&&(b={url:b}),b.callback=d,"timeout"in b||(b.timeout=this._defaultTimeout),b.callbackName=b.callbackName||"_jsonp_loader_callback_request_"+this._requestsCount++,b.timeout&&(b.timeoutHandler=c(this._abortRequest.bind(this,b),b.timeout)),a[b.callbackName]=this._receiveData.bind(this,b);var e=b.url;/\{\{CALLBACK_NAME\}\}/.test(b.url)?e=e.replace("{{CALLBACK_NAME}}",b.callbackName):(e+=~e.indexOf("?")?"&":"?",e+=(b.queryStringKey||"callback")+"="+b.callbackName),this.loadScript(e,this._scriptLoadCallback.bind(this,b))},_defaultTimeout:500,_requestsCount:0,_receiveData:function(a,b){return this._cleanup(a),a.aborted?void 0:b?void a.callback(null,b):a.callback(new Error("no data received"))},_abortRequest:function(b){b.aborted=!0,a[b.callbackName]=function(){},b.callback(new Error("jsonp request aborted"))},_scriptLoadCallback:function(a,b){b&&(this._cleanup(a),a.aborted||a.callback(b))},_cleanup:function(b){b.timeoutHandler&&(d(b.timeoutHandler),delete b.timeoutHandler);try{delete a[b.callbackName]}catch(c){a[b.callbackName]=void 0}}}}"function"==typeof define&&define.amd?define("jsonpClient",[],e):a.jsonpClient=e()}(this,this.document,this.setTimeout,this.clearTimeout),function(a){function b(a){var b={prod:"http://webservices.francetelevisions.fr/assets/staticmd5/getUrl?callback={{CALLBACK_NAME}}&id={{ID}}",preprod:"http://webservices.ftv-preprod.fr/assets/staticmd5/getUrl?callback={{CALLBACK_NAME}}&id={{ID}}",dev:"http://player.ftven.net/staticmd5/url/{{ID}}",local:"http://0.0.0.0:8090/staticmd5/url/{{ID}}"};return{staticMd5Url:b.prod,staticId:"jquery.player.default.js",easyPlayer:function(a,b){this.get(["jqueryJQP","jquery/player"],b,function(c){c(function(){c(a).player(b)})})},createPlayer:function(a,b,c){2===arguments.length&&(c=b,b={}),this.get(["PlayerApi"],b,function(d){c(new d(a,b))})},get:function(a,b,c){2===arguments.length&&(c=b,b={}),this.load(b,function(b){return b?c(b):void require(a,c)}.bind(this))},load:function(b,c){return b=this._getOptions(b),this._loaded?this._matchOptions(b)?c():c(new Error("Another JQP already loaded")):this._loading?this._matchOptions(b)?this._callbacks.push(c):c(new Error("Another JQP already loading")):(this._loading=!0,b.staticId&&(this.staticId=b.staticId),b.staticMd5Url&&(this.staticMd5Url=b.staticMd5Url),this._callbacks=[c],void this.requestStaticmd5Url(null,function(b,c){return b?this._onloadFinished(b):void a.loadScript(c,function(a){return a?this._onloadFinished(new Error("jqp load: "+a.message)):void this._onloadFinished()}.bind(this))}.bind(this)))},requestStaticmd5Url:function(b,c){var d=this.staticId,e=this.staticMd5Url;b=this._getOptions(b),b.staticId&&(d=b.staticId),b.staticMd5Url&&(e=b.staticMd5Url),a.get({url:e.replace("{{ID}}",d),timeout:5e3},function(a,b){return a?c(a):b.result?void c(null,b.result):c(new Error("invalid staticMd5 result"))})},_makeStaticId:function(a){return"jquery.player."+a+".js"},_getOptions:function(a){var c={};return a?("string"==typeof a?(/^jquery\.player\.(.+\.)?js$/.test(a)||(a=this._makeStaticId(a)),c.staticId=a):(a.buildId?c.staticId=this._makeStaticId(a.buildId):a.staticId&&(c.staticId=a.staticId),a.staticMd5Url&&(c.staticMd5Url=a.staticMd5Url in b?b[a.staticMd5Url]:a.staticMd5Url)),c):c},_matchOptions:function(a){return!(a&&(a.buildId&&this._makeStaticId(a.buildId)!==this.staticId||a.staticId&&a.staticId!==this.staticId||a.staticMd5Url&&a.staticMd5Url!==this.staticMd5Url))},_onloadFinished:function(a){this._loading=!1,a||(this._loaded=!0),this._callbacks.forEach(function(b){b(a)}),delete this._callbacks}}}"function"==typeof define&&define.amd?define("jqp-bootstrap",["jsonpClient"],b):a.jqpBootstrap=b(a.jsonpClient)}(this);